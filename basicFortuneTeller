#include <iostream>
#include <cstdlib>
#include <ctime>
#include <vector>
#include <string>

using namespace std;

// Function to display the fortune based on the category
void getFortune(const string& category) {
    vector<string> positiveFortunes = {
        "You will find happiness in the near future.",
        "Success is within your reach.",
        "Someone close to you will bring good news.",
        "Your hard work will soon pay off."
    };

    vector<string> neutralFortunes = {
        "An opportunity will arise that you must seize.",
        "A surprise awaits you in your career.",
        "You will face challenges, but they will make you stronger.",
        "Take a step back and think before acting."
    };

    vector<string> negativeFortunes = {
        "Beware of unexpected changes.",
        "A difficult situation is coming your way.",
        "Someone may try to deceive you.",
        "You will face disappointment, but stay strong."
    };

    vector<string>* fortuneList = nullptr;

    // Choose the fortune list based on category
    if (category == "positive") {
        fortuneList = &positiveFortunes;
    } else if (category == "neutral") {
        fortuneList = &neutralFortunes;
    } else if (category == "negative") {
        fortuneList = &negativeFortunes;
    } else {
        cout << "Unknown category. Showing neutral fortune.\n";
        fortuneList = &neutralFortunes;
    }

    // Get random index
    int index = rand() % fortuneList->size();
    cout << "Your fortune: " << fortuneList->at(index) << endl;
}

int main() {
    // Seed the random number generator
    srand(time(0));

    string name;
    string question;
    string category;

    cout << "Welcome to the Fortune Teller program!\n";
    cout << "What's your name? ";
    cin >> name; // Taking user's name

    cout << "Hello, " << name << "! Ask a question for your fortune.\n";
    cin.ignore(); // To clear the newline character left by previous input
    getline(cin, question);  // User inputs a question

    cout << "What kind of fortune would you like? (positive/neutral/negative): ";
    cin >> category; // Taking category input

    cout << "Thinking...\n";
    
    // Get a random fortune based on the category
    getFortune(category);

    // Ask the user if they want to ask another question
    char again;
    cout << "Would you like to ask another question? (y/n): ";
    cin >> again;

    if (again == 'y' || again == 'Y') {
        main(); // Restart the program
    } else {
        cout << "Thank you for using the Fortune Teller program! Goodbye, " << name << "!\n";
    }

    return 0;
}
